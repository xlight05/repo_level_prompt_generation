<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<f:view contentType="text/html" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:s="http://jboss.com/products/seam/taglib">
<html>
	<head>
		<ui:include src="/layout/header.xhtml" />
    	<script type="text/javascript" src="#{request.contextPath}/js/layout.js"></script>
    	<script type="text/javascript" src="#{request.contextPath}/js/tools.js"></script>
	</head>
	<body>
		<a4j:outputPanel id="menuRender">
			<ui:include src="/layout/north.xhtml" />
		</a4j:outputPanel>
		<s:fragment id="panels">	
			<ui:include src="/admin/applicationPopUp.xhtml"/>
			<ui:include src="/admin/addDomainPopUp.xhtml" />
			<ui:include src="/admin/addFolderPopUp.xhtml" />
			<ui:include src="/admin/addPagePopUp.xhtml" />
		</s:fragment>

		<ui:include src="/layout/globaleMessages.xhtml" />
	 	
		<s:div id="tabContainer">
			<rich:tabPanel switchType="ajax" 
				styleClass="templateTabPanel" 
				selectedTab="#{tabViewProvider.selectedTab}"
				width="100%" height="100%">
				<rich:tab name="CMS" 
					reRender="tabContainer"
					labelWidth="200"
					styleClass="pageTab">
					<f:facet name="label">
			            <h:panelGroup layout="block" style="display: block;">
			            	<div class="hideTabLink" style="position: relative; left: 10px; top: -3px; width: 14px; height: 14px; float: right;">
			                </div>
			            	<h:outputText value="#{messages['admin.tab.cms']}" style="position: relative;float: left;" />
			            </h:panelGroup>
			        </f:facet>
					<ui:include src="/cmspages/cmsnavigation.xhtml" />
					<s:div id="cmscontent">
						<ui:include src="#{pageTemplateProvider.adminGuiPageTemplate.viewId}"/>
					</s:div>
				</rich:tab>
				<c:forEach items="#{tabViewProvider.actions}" var="action" varStatus="status">
            		<rich:tab rendered="#{action.tabView.rendered}"
            			name="#{action.tabView.tabId}"
            			reRender="tabContainer"
						labelWidth="200"
						styleClass="pageTab">
						<f:facet name="label">
				            <h:panelGroup layout="block" style="display: block;">
				            	<div class="hideTabLink" style="position: relative; left: 10px; top: -3px; width: 14px; height: 14px; float: right;">
					            	<h:graphicImage value="/img/modal/close.png" style="display: none;">
					                	<a4j:support 
					                		event="onclick"
					                		reRender="menuRender, tabContainer"
					                		action="#{tabViewProvider.close(status.index)}" />
					                </h:graphicImage>
				                </div>
				            	<h:outputText value="#{action.tabView.tabLable}" style="position: relative;float: left;" />
				            </h:panelGroup>
				        </f:facet>
            			<ui:include src="#{action.tabView.tabViewId}" />
            		</rich:tab>
            	</c:forEach>
            </rich:tabPanel>
            <rich:jQuery selector=".hideTabLink" query="hover(function(){jQuery(this).find('img').show();},function(){jQuery(this).find('img').hide();})"/>
		</s:div>
			
		<s:div id="footer" rendered="#{pageInfo.showFooter}">
			Powered by <a href="http://jboss.com/products/seam">Seam</a>. Generated by seam-gen.
		</s:div>
		<rich:jQuery selector="table td.rich-toolbar-item img.hover" 
			query="hover(function(){jQuery(this).addClass('ahover');},function(){jQuery(this).removeClass('ahover');})"/>
			
			<!-- 
			<s:fragment rendered="#{not tabController.tabPaneShow}">
				<rich:jQuery timing="onload" query="resizeLayout()"/>
				<rich:jQuery selector="window" query="resize(jQuery.fn.resizeLayout)"/>
			</s:fragment>
			
			<s:fragment rendered="#{tabController.tabPaneShow}">
				<rich:jQuery timing="onload" query="resizeLayoutWithTab()"/>
				<rich:jQuery selector="window" query="resize(jQuery.fn.resizeLayoutWithTab)"/>
			</s:fragment>
			-->	
	</body>
</html>
</f:view>