<?xml version="1.0"?>
<!DOCTYPE faces-config PUBLIC "-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.0//EN"
                              "http://java.sun.com/dtd/web-facesconfig_1_0.dtd">
<faces-config>
	<managed-bean>
		<managed-bean-name>userBean</managed-bean-name>
		<managed-bean-class>edu.spbsu.eshop.beans.SessionBean</managed-bean-class>
		<managed-bean-scope>session</managed-bean-scope>
	</managed-bean>
	<managed-bean>
		<managed-bean-name>error</managed-bean-name>
		<managed-bean-class>edu.spbsu.eshop.beans.ErrorBean</managed-bean-class>
		<managed-bean-scope>session</managed-bean-scope>
	</managed-bean>
	<managed-bean>
		<managed-bean-name>navigation</managed-bean-name>
		<managed-bean-class>edu.spbsu.eshop.beans.NavigationBean</managed-bean-class>
		<managed-bean-scope>request</managed-bean-scope>
	</managed-bean>
	<managed-bean>
		<managed-bean-name>admin</managed-bean-name>
		<managed-bean-class>edu.spbsu.eshop.admin.AdminBean</managed-bean-class>
		<managed-bean-scope>session</managed-bean-scope>
	</managed-bean>
	<managed-bean>
		<managed-bean-name>auth</managed-bean-name>
		<managed-bean-class>edu.spbsu.eshop.beans.AuthBean</managed-bean-class>
		<managed-bean-scope>request</managed-bean-scope>
		<managed-property>
			<property-name>sessionBean</property-name>
			<value>#{userBean}</value>
		</managed-property>
	</managed-bean>
	<managed-bean>
		<managed-bean-name>adminRedirector</managed-bean-name>
		<managed-bean-class>edu.spbsu.eshop.admin.AdminPageRedirector</managed-bean-class>
		<managed-bean-scope>request</managed-bean-scope>
		<managed-property>
			<property-name>adminBean</property-name>
			<value>#{admin}</value>
		</managed-property>
		<managed-property>
			<property-name>userBean</property-name>
			<value>#{userBean}</value>
		</managed-property>
	</managed-bean>
	<managed-bean>
		<managed-bean-name>permissions</managed-bean-name>
		<managed-bean-class>edu.spbsu.eshop.beans.PermissionsBean</managed-bean-class>
		<managed-bean-scope>session</managed-bean-scope>
		<managed-property>
			<property-name>userBean</property-name>
			<value>#{userBean}</value>
		</managed-property>
	</managed-bean>
	<managed-bean>
		<managed-bean-name>orders</managed-bean-name>
		<managed-bean-class>edu.spbsu.eshop.beans.OrdersBean</managed-bean-class>
		<managed-bean-scope>request</managed-bean-scope>
		<managed-property>
			<property-name>userBean</property-name>
			<value>#{userBean}</value>
		</managed-property>
		<managed-property>
			<property-name>register</property-name>
			<value>#{registration}</value>
		</managed-property>
	</managed-bean>
	<managed-bean>
		<managed-bean-name>productPage</managed-bean-name>
		<managed-bean-class>edu.spbsu.eshop.beans.ProductPageBean</managed-bean-class>
		<managed-bean-scope>request</managed-bean-scope>
		<managed-property>
			<property-name>userBean</property-name>
			<value>#{userBean}</value>
		</managed-property>
		<managed-property>
			<property-name>orders</property-name>
			<value>#{orders}</value>
		</managed-property>
	</managed-bean>
	<managed-bean>
		<managed-bean-name>search</managed-bean-name>
		<managed-bean-class>edu.spbsu.eshop.beans.SearchBean</managed-bean-class>
		<managed-bean-scope>request</managed-bean-scope>
		<managed-property>
			<property-name>navigationBean</property-name>
			<value>#{navigation}</value>
		</managed-property>
		<managed-property>
			<property-name>sessionBean</property-name>
			<value>#{userBean}</value>
		</managed-property>
	</managed-bean>
	<managed-bean>
		<managed-bean-name>registration</managed-bean-name>
		<managed-bean-class>edu.spbsu.eshop.beans.RegistrationBean</managed-bean-class>
		<managed-bean-scope>request</managed-bean-scope>
	</managed-bean>
	
	<navigation-rule>
		<from-view-id>/admin/*</from-view-id>
		<navigation-case>
			<from-outcome>content</from-outcome>
			<to-view-id>/admin/content.xhtml</to-view-id>
		</navigation-case>
	</navigation-rule>
	
	<navigation-rule>
		<from-view-id>/*</from-view-id>
		<navigation-case>
			<from-outcome>enterUserData</from-outcome>
			<to-view-id>/orderDataForUnrigistred.xhtml</to-view-id>
		</navigation-case>
	</navigation-rule>
	
	<navigation-rule>
		<from-view-id>/product.xhtml</from-view-id>
		<navigation-case>
			<from-outcome>cart</from-outcome>
			<to-view-id>/cart.xhtml</to-view-id>
		</navigation-case>
	</navigation-rule>
	
	<navigation-rule>
		<from-view-id>/cart.xhtml</from-view-id>
		<navigation-case>
			<from-outcome>orderConfirmation</from-outcome>
			<to-view-id>/orderConfirmationContent.xhtml</to-view-id>
		</navigation-case>
	</navigation-rule>
	
	<navigation-rule>
		<from-view-id>/orderDataForUnrigistred.xhtml</from-view-id>
		<navigation-case>
			<from-outcome>orderConfirmation</from-outcome>
			<to-view-id>/orderConfirmationContent.xhtml</to-view-id>
		</navigation-case>
	</navigation-rule>
	
	<navigation-rule>
		<from-view-id>/*</from-view-id>
		<navigation-case>
			<from-outcome>search</from-outcome>
			<to-view-id>/search.xhtml</to-view-id>
		</navigation-case>
	</navigation-rule>
	
	<navigation-rule>
		<from-view-id>/*</from-view-id>
		<navigation-case>
			<from-outcome>fail</from-outcome>
			<to-view-id>/error.xhtml</to-view-id>
		</navigation-case>
	</navigation-rule>
	
	<navigation-rule>
		<from-view-id>/login.xhtml</from-view-id>
		<navigation-case>
			<from-outcome>success</from-outcome>
			<to-view-id>/redirect.xhtml</to-view-id>
		</navigation-case>
	</navigation-rule>
	<application>
		<locale-config>
			<default-locale>ru_RU</default-locale>
			<supported-locale>ru_RU</supported-locale>
		</locale-config>
		<message-bundle>ApplicationMessages</message-bundle>
		<view-handler>com.sun.facelets.FaceletViewHandler</view-handler>
	</application>
</faces-config>
